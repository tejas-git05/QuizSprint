<div class="main max-w-6xl p-4 md:p-6 mx-auto bg-gray-50 min-h-screen" *ngIf="!isSubmitted">

  <!-- Exam Header -->
  <div class="bg-white rounded-xl shadow-md p-4 md:p-6 mb-4 md:mb-6 border border-gray-200">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-2">
      <h1 class="text-base md:text-lg font-semibold text-gray-800">{{questions[0]?.quiz?.title || 'Exam'}}</h1>
      <div class="flex items-center gap-4">
        <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
          For Time
        </div>
        <span class="text-gray-600 text-sm md:text-base">
          Question {{currentQuestion +1 }} / {{questions.length}}
        </span>
      </div>
    </div>
  </div>

  <!-- Progress Bar -->
  <div class="mt-4 h-1 bg-gray-200 rounded-full">
    <div class="h-full bg-gray-500 rounded-full"
         [style.width]="(currentQuestion + 1) / questions.length * 100 + '%'">
    </div>
  </div>

  <!-- âœ… Responsive Layout -->
  <div class="flex flex-col md:flex-row gap-6 mt-6">

    <!-- Left Column: Question Section -->
    <div class="flex-1 bg-white rounded-xl shadow-md p-4 md:p-6 border border-gray-200">
      <div *ngFor="let question of questions; let i = index">
        <div [hidden]="currentQuestion !== i">

          <!-- Question -->
          <div class="mb-6">
            <h2 class="text-base md:text-lg font-semibold text-gray-800 mb-4">
              Q{{i +1}}. {{question.content}}
            </h2>

            <!-- Options -->
            <div class="space-y-3">
              <label *ngFor="let opt of ['option1','option2','option3','option4']"
                     class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer"
                     [class.bg-blue-50]="selectedAnswers[question.id] === question[opt]">

                <input type="radio" name="question-{{question.queId}}"
                      [value]="question[opt]" class="h-5 w-5 text-gray-600 border-gray-300 focus:ring-gray-500"
                      (change)="selectAnswer(question.queId, opt)"
                      [checked]="selectedAnswers[question.id] === opt"
                      [(ngModel)]="question.givenAnswer" >
                <span class="text-gray-800">{{question[opt]}}</span>
              </label>
            </div>
          </div>

          <!-- Navigation Buttons -->
          <div class="flex justify-between mt-8 gap-2">
            <button 
              (click)="prevQuestion()" [disabled]="currentQuestion === 0"
              class="px-4 py-2 border text-gray-800 bg-white hover:bg-gray-200 rounded-md disabled:opacity-50">
              Previous
            </button>

            <button *ngIf="currentQuestion < questions.length - 1"
              (click)="nextQuestion()"
              class="px-4 py-2 bg-gray-700 text-white hover:bg-gray-800 rounded-md">
              Next
            </button>

            <button *ngIf="currentQuestion === questions.length - 1"
              (click)="submitExam()"
              class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">
              Submit Exam
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- âœ… Right Column: Question Navigation -->
    <div class="w-full md:w-64 bg-white rounded-xl shadow-md p-4 md:p-6 border border-gray-200 md:sticky md:top-6">
      <h3 class="text-lg font-medium text-gray-800 mb-4">Question Navigation</h3>
      <div class="grid grid-cols-6 sm:grid-cols-8 md:grid-cols-4 gap-2">
        <button 
          *ngFor="let question of questions; let i = index"
          (click)="goToQuestion(i)"
          [class.bg-gray-300]="currentQuestion === i"
          [class.bg-gray-100]="currentQuestion !== i"
          class="h-10 w-10 rounded-md flex items-center justify-center text-gray-700 hover:bg-blue-50 border border-gray-200">
          {{i+1}}
        </button>
      </div>
    </div>

  </div>
  
</div>

<!-- âœ… Show the result after submission -->
<div *ngIf="isSubmitted" class="max-w-3xl mx-auto p-6  min-h-screen flex flex-col items-center justify-center animate-fade-in">

  <!-- Animation Image (Lottie or GIF) -->
  <!-- <div class="w-40 h-40 mb-6">
    <img src="https://cdn.dribbble.com/users/12345/screenshots/12345678/media/success.gif" alt="Success" class="w-full h-full object-contain">
  </div> -->

  <!-- Result Card -->
  <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 w-full text-center border border-gray-200">
    <h1 class="text-2xl md:text-3xl font-bold text-green-600 mb-4 animate-bounce">ðŸŽ‰ Congratulations!</h1>
    <p class="text-gray-700 mb-2 text-lg">You have completed the exam.</p>

    <div class="grid grid-cols-2 gap-4 mt-6">
      <div class="bg-gray-100 rounded-lg p-4">
        <p class="text-gray-500 text-sm">Total Questions</p>
        <p class="text-xl font-semibold">{{questions.length}}</p>
      </div>
      <div class="bg-gray-100 rounded-lg p-4">
        <p class="text-gray-500 text-sm">Attempted</p>
        <p class="text-xl font-semibold">{{attemptedQue}}</p>
      </div>
      <div class="bg-gray-100 rounded-lg p-4">
        <p class="text-gray-500 text-sm">Correct Answers</p>
        <p class="text-xl font-semibold text-green-600">{{correctAnswers}}</p>
      </div>
      <div class="bg-gray-100 rounded-lg p-4">
        <p class="text-gray-500 text-sm">Marks Obtained</p>
        <p class="text-xl font-semibold">{{marksGot}} / {{questions[0].quiz?.maxMarks}}</p>
      </div>
    </div>

    <!-- Action Button -->
    <div class="mt-8 flex gap-4 justify-center">
      <button (click)="isSubmitted = false" class="px-6 py-3 bg-gray-700 text-white text-lg rounded-lg hover:bg-gray-800 transition">
        Back to Exam
      </button>
      <button class="px-6 py-3 bg-gray-700 text-white text-lg rounded-lg hover:bg-gray-800 transition">
        Print
      </button>
    </div>
  </div>

</div>

  
  <!-- No questions in quiz -->
<div *ngIf="questions.length == 0" class="main no-questions">
  <p>No questions available for this quiz.</p>
</div>